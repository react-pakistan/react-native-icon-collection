const fs = require("fs");

const generateIcons = () => {
  const svgDir = `./assets/svgs/`;
  const svgExportDir = `./assets/xml/icon-list.js`;

  let iconIndexOutput = `/**
 * Generated by scripts/generate-icons.js
 * DO NOT EDIT!
 */

`;

let iconFolderNameOutput = `/**
 * Generated by scripts/generate-icons.js
 * DO NOT EDIT!
 */

export const folderNames : any = [
  `;

let iconNameOutput = `/**
 * Generated by scripts/generate-icons.js
 * DO NOT EDIT!
 */

export const iconNames : any = [
  `;

  // Read root Svg icon directory
  fs.readdirSync(svgDir).forEach(fileName => {
    if (fileName === '.DS_Store') return;

    const subDir = `${svgDir}${fileName}`;
    iconFolderNameOutput += `'${fileName}',
  `;

let iconListOutput = `/**
 * Generated by scripts/generate-icons.js
 * DO NOT EDIT!
 */

`;
    // Read sub-directory
    return fs.readdirSync(subDir).forEach(subDirFileName => {
      // trim qoutes & .svg off subDirFileName
      let trimmedStr = subDirFileName.replace(/(.svg)|-/g, '');
      let svgContent = fs.readFileSync(`${subDir}/${subDirFileName}`, 'utf8');
      iconListOutput += `export const ${trimmedStr} = () : any => \`${svgContent}\`;
  `;

    iconIndexOutput += `export { ${trimmedStr} } from './${fileName}'
  `;

    iconNameOutput += `'${trimmedStr}',
  `;
    
    fs.writeFileSync(`./assets/xml/${fileName}.ts`, iconListOutput);
    fs.writeFileSync(`./assets/xml/index.ts`, iconIndexOutput);
    });
  });
  iconNameOutput += `];
`;
  fs.writeFileSync(`./assets/xml/icon-names.ts`, iconNameOutput);
  iconFolderNameOutput += `];
`;
  fs.writeFileSync(`./assets/xml/folder-names.ts`, iconFolderNameOutput);
};

generateIcons();
